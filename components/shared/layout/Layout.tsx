// Import assets
import logo from '@/assets/logos/logo.svg';

import clsx from 'clsx';
import { RootState } from 'lib/redux';
import { ILayout, NavLink, Social } from 'models/shared';
import dynamic from 'next/dynamic';
import Head from 'next/head';
import { useRouter } from 'next/router';
import { ReactNode, useEffect } from 'react';
import { renderToStaticMarkup } from 'react-dom/server';
import { useDispatch, useSelector } from 'react-redux';
import { ContactDial, Footer } from '.';
import { setLayout } from '../store/layoutSlice';
import { Navbar, NavbarTop } from './nav';

// TODO: Fetch from CMS
const navTopLinks: NavLink[] = [
  {
    label: 'Contact Us',
    path: '/contact-us',
    color: 'secondary',
    type: 'outlined',
  },
];

const contactMethods: ILayout['navTop']['contactMethods'] = [
  {
    icon: renderToStaticMarkup(
      <svg
        version="1.0"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 512 512"
        fill="currentColor"
      >
        <path
          d="M2640 5112c0-6-11-87-25-182s-25-180-25-190c0-14 15-20 78-30 306-49 675-193 942-370 164-109 268-193 404-328 352-348 583-769 691-1257 18-86 24-100 41-98 49 4 360 57 366 62 4 3-4 56-17 117-189 873-767 1614-1567 2007-253 125-509 211-748 252-52 9-105 19-117 22-13 3-23 1-23-5zM784 4620c-97-20-141-54-398-309-136-135-264-269-282-298-180-276-126-734 158-1351 319-690 891-1386 1548-1882 387-292 848-543 1230-671 316-105 613-135 802-80 142 41 173 65 455 345 237 236 265 268 294 330 28 60 33 81 33 146s-5 86-33 146c-30 64-59 96-394 430-295 294-372 366-417 387-76 37-147 49-212 37-108-21-149-51-399-297-130-128-244-233-253-233-25 0-260 121-351 181-354 230-755 621-1012 985-88 125-129 194-188 316-37 76-46 103-40 125 4 18 88 110 235 258 205 206 233 238 260 299 53 115 41 225-34 339-19 29-189 206-378 394-308 307-350 345-408 372-71 33-152 44-216 31zM2587 4071c-14-72-50-361-46-365 2-3 40-12 84-21 513-106 922-505 1045-1019 11-43 20-80 22-81 5-4 378 62 383 67 7 6-10 91-37 183-180 637-716 1125-1370 1248l-76 14-5-26z"
          transform="matrix(.1 0 0 -.1 0 512)"
        />
      </svg>
    ),
    title: 'Support:',
    content: '03 8539 4855',
    url: 'tel:03 8539 4855',
  },
  {
    icon: renderToStaticMarkup(
      <svg
        version="1.0"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 512 512"
        fill="currentColor"
      >
        <path
          d="M2494 5102c-17-9-119-91-227-182l-196-165 245-3c134-1 354-1 489 0l245 3-196 165c-108 91-210 173-227 183-40 21-93 21-133-1zM1038 4429c-23-12-46-35-58-59-20-38-20-57-19-947v-908l526-408 525-407h1097l525 408 525 407v908c1 891 1 909-19 947-13 26-34 47-60 60-39 20-55 20-1522 20-1457-1-1484-1-1520-21zm1678-340c361-50 673-275 836-604 70-140 98-261 98-419 0-262-109-529-261-641-85-62-156-87-264-92-117-6-182 16-262 91l-56 52-56-33c-115-69-266-87-386-44-233 82-385 320-386 602-1 247 102 444 291 556 113 67 286 86 404 44 33-11 62-21 66-21 3 0 14 16 23 35 47 99 197 100 257 3 19-32 20-52 20-488 0-515-2-500 71-500 52 0 89 20 133 72 83 97 130 357 92 508-68 265-285 482-562 562-103 30-303 32-404 4-362-99-600-407-600-777 0-132 24-231 84-354 81-163 206-286 370-365 95-45 173-67 276-76 95-9 144-32 170-84 25-50 25-90 0-140-25-48-81-80-142-80-131 0-327 53-467 125-363 189-590 561-591 966 0 297 101 554 303 766 244 257 596 381 943 332z"
          transform="matrix(.1 0 0 -.1 0 512)"
        />
        <path
          d="M2463 3316c-53-17-89-46-129-102-98-138-66-386 63-493 128-106 280-21 329 184 17 74 15 176-6 247-36 125-150 198-257 164zM420 3365c-129-108-241-203-248-210-12-10 29-46 233-205 135-105 248-190 251-188 2 3 3 184 2 403l-3 398-235-198zM4460 3160c0-220 3-400 6-400 7 0 482 368 488 379 5 7-442 392-480 414-12 7-14-57-14-393zM10 1550c0-726 2-1320 5-1320 10 0 1690 1312 1690 1320S25 2870 15 2870c-3 0-5-594-5-1320zM4260 2215c-465-361-845-661-845-665s380-304 845-665l845-657 3 661c1 364 1 958 0 1322l-3 661-845-657zM1115 703 218 5l1171-3c644-1 1698-1 2342 0l1172 3-897 698-897 697H2012l-897-697z"
          transform="matrix(.1 0 0 -.1 0 512)"
        />
      </svg>
    ),
    title: 'Enquiry:',
    content: 'enquiries@waterwash.com.au',
    url: 'mailto:enquiries@waterwash.com.au',
  },
];

const navLinks: NavLink[] = [
  {
    label: 'Residential',
    path: '/residential',
    color: 'primary',
    type: 'text',
  },
  {
    label: 'Commercial',
    path: '/commercial',
    color: 'primary',
    type: 'text',
  },
  {
    label: 'About Us',
    path: '/about-us',
    color: 'secondary',
    type: 'text',
  },
];

const socials: Social[] = [
  {
    label: 'Instagram',
    icon: renderToStaticMarkup(
      <svg
        version="1.0"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 512 512"
        fill="currentColor"
      >
        <path
          d="M1215 5105C645 5025 186 4615 46 4060c-14-52-29-135-35-185-15-124-15-2506 0-2630C80 662 495 188 1060 46c52-14 136-29 185-35 124-15 2506-15 2630 0 525 62 964 405 1155 901 31 81 67 233 79 333 15 124 15 2506 0 2630-62 525-405 964-901 1155-81 31-233 67-333 79-137 17-2541 13-2660-4zm2961-652c129-43 233-147 277-277 21-62 22-184 2-250-82-271-405-387-640-230-138 91-211 254-186 413 26 160 135 291 284 342 68 23 197 25 263 2zm-1396-508c297-49 559-183 770-395 269-268 410-609 410-990s-141-722-410-990c-268-269-609-410-990-410s-722 141-990 410c-269 268-410 609-410 990s141 722 410 990c207 208 470 344 760 395 103 17 346 18 450 0z"
          transform="matrix(.1 0 0 -.1 0 512)"
        />
        <path
          d="M3989 4155c-58-31-80-116-45-170 68-104 226-58 226 65 0 90-102 148-181 105zM2366 3644c-521-94-906-554-906-1084 0-679 619-1201 1286-1085 733 128 1131 929 791 1590-220 425-702 664-1171 579z"
          transform="matrix(.1 0 0 -.1 0 512)"
        />
      </svg>
    ),
    url: process.env.NEXT_PUBLIC_INSTAGRAM_URL ?? 'https://www.instagram.com/Waterwashau',
  },
  {
    label: 'Facebook',
    icon: renderToStaticMarkup(
      <svg
        version="1.0"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 512 512"
        fill="currentColor"
      >
        <path
          d="M655 5114c-11-2-45-9-75-15-217-44-429-224-522-444-56-133-53-12-53-2095S2 598 58 465c76-178 229-332 402-405C595 3 549 6 1438 3l822-4v1811h-600v900h599l3 378c4 351 6 382 26 457a933 933 0 0 0 647 647c77 21 98 22 608 26l527 3v-901h-910v-610h912l-6-27c-3-16-35-206-71-423s-68-407-71-423l-6-27h-758V-1l673 4c572 3 679 5 722 19 280 86 478 289 546 558 21 82 21 3878 0 3960-59 230-227 429-441 520-140 59 19 54-2070 56-1053 1-1924 0-1935-2z"
          transform="matrix(.1 0 0 -.1 0 512)"
        />
      </svg>
    ),
    url: process.env.NEXT_PUBLIC_FACEBOOK_URL ?? 'https://www.facebook.com/waterwashau',
  },
  {
    label: 'Google Maps',
    icon: renderToStaticMarkup(
      <svg
        version="1.0"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 512 512"
        fill="currentColor"
      >
        <path
          d="M4057 5105c-276-53-519-237-642-490-70-142-88-224-88-395 0-118 4-160 22-225 44-163 85-227 486-762 208-277 381-503 385-503s177 226 385 503c401 535 442 599 486 762 18 65 22 107 22 225 0 171-18 253-88 395-112 230-333 411-580 475-106 28-283 35-388 15zm244-445c235-45 399-275 361-506-32-196-180-344-376-376-289-48-556 219-508 508 42 252 277 420 523 374z"
          transform="matrix(.1 0 0 -.1 0 512)"
        />
        <path
          d="M4148 4349c-43-22-78-81-78-129 0-50 35-107 80-130 21-11 53-20 70-20 50 0 107 35 130 80 11 21 20 53 20 70 0 50-35 107-80 130-49 25-94 25-142-1zM0 2518V215l1634 1634c899 899 1632 1640 1629 1645-4 6-23 36-43 66-230 342-262 784-84 1159 24 51 44 95 44 97s-715 4-1590 4H0V2518zm1455 1692c39-6 99-20 135-31 68-23 218-96 259-128l24-18-88-117c-48-64-89-116-92-116-2 0-35 18-71 39-207 123-432 102-587-54-104-103-148-232-128-369 29-204 176-355 379-388 175-29 370 66 452 220 18 33 32 63 32 66s-61 6-135 6h-135v300h603l-6-142c-3-79-12-165-20-193-77-271-288-478-557-546-31-8-105-14-170-14-165 0-275 33-410 121-335 218-436 659-231 1008 53 90 164 202 256 258 140 85 323 121 490 98zM3039 2832l-414-409 472-479c259-264 753-760 1097-1104l626-625v1398c0 768-2 1397-4 1397s-135-175-296-390c-161-214-296-390-300-390s-175 224-380 498c-205 273-376 501-380 505-4 5-193-176-421-401zM1434 1233C907 700 417 205 346 133L217 0h4388L3505 1100c-605 605-1103 1100-1106 1100s-437-435-965-967z"
          transform="matrix(.1 0 0 -.1 0 512)"
        />
      </svg>
    ),
    url: process.env.NEXT_PUBLIC_TWITTER_URL ?? 'https://goo.gl/maps/pW5fmo7GbLcxptXf7',
  },
];

const contactDial: ILayout['contactDial'] = {
  icon: renderToStaticMarkup(
    <svg
      version="1.0"
      xmlns="http://www.w3.org/2000/svg"
      width="100%"
      height="100%"
      viewBox="0 0 512 512"
      fill="currentColor"
      style={{ padding: 10 }}
    >
      <path
        d="M2300 4995c-492-61-947-283-1295-630-370-370-598-865-640-1387l-7-87-58-35c-116-72-207-201-236-335-20-95-20-698 1-794 40-192 205-359 392-398 179-37 334 29 411 176l27 50v1140l-27 50c-28 54-96 123-145 149-17 8-51 20-77 27l-47 12 6 46c41 315 87 475 206 713 279 557 811 948 1435 1054 128 21 378 29 509 15 602-65 1121-381 1447-881 157-240 263-522 298-790 23-178 26-156-27-169-25-7-59-19-76-27-49-26-117-95-145-149l-27-50V1555l27-50c28-54 96-123 145-149 17-8 51-20 76-27l47-11v-152c0-168-12-235-58-320-39-72-127-158-200-195-101-51-163-61-387-61h-200l-29 56c-36 68-113 137-186 166-52 21-71 22-315 22-250 0-262-1-320-23-84-34-174-124-204-206-33-86-27-216 13-293 36-71 99-132 172-168l59-29h560l57 28c66 32 136 99 169 162l23 43 240 5c270 5 308 11 441 76 145 72 261 187 331 331 61 123 67 156 72 387l4 211 57 36c119 73 208 199 237 335 20 94 20 698 0 792-29 134-120 263-235 334l-58 36-12 122c-45 463-214 864-519 1227-302 361-759 631-1225 725-231 46-487 57-707 30zM629 2664l31-26V1613l-26-27c-57-56-192-22-272 69-68 78-72 102-72 470 0 367 4 392 71 469 82 93 203 125 268 70zm4048-2c57-30 120-105 138-165 12-40 15-116 15-372 0-368-4-392-72-470-80-91-215-125-272-69l-26 27v1024l28 28c25 25 32 27 87 22 33-2 79-14 102-25zM3416 556c28-28 34-42 34-75 0-53-22-97-60-116-42-21-447-22-489-1-41 22-61 59-61 112 0 39 5 51 34 80l34 34h474l34-34z"
        transform="matrix(.1 0 0 -.1 0 512)"
      />
      <path
        d="M1715 3840c-200-27-361-167-422-365-17-55-18-106-18-655 0-588 0-596 22-666 60-189 220-326 416-355l77-11v-142c0-168 14-228 66-286 73-80 190-106 284-62 31 14 122 96 285 256l240 236h345c190 0 374 5 410 10 78 12 188 65 252 120s124 148 151 234c22 70 22 78 22 666 0 549-1 600-18 655-51 166-173 293-336 347l-66 23-825 1c-454 1-852-2-885-6zm1725-256c67-31 106-68 137-132l28-57v-575c0-562 0-576-21-620-30-65-69-107-128-138l-51-27-421-5-421-5-258-252c-141-139-261-253-266-253s-9 95-9 210c0 291-2 294-200 302-92 4-123 9-156 26-66 34-101 69-131 130l-28 57v570c0 443 3 578 13 607 32 89 112 159 203 177 24 5 409 8 854 8 799-2 811-2 855-23z"
        transform="matrix(.1 0 0 -.1 0 512)"
      />
      <path
        d="M1928 2970c-72-22-128-96-128-170 0-81 65-158 147-175 66-13 155 32 188 96 19 36 19 122 0 158-20 39-69 78-113 91-42 11-56 11-94 0zM2502 2966c-49-17-98-70-112-121-35-125 90-252 211-216 97 29 154 126 129 216-20 73-98 133-170 133-14 0-40-5-58-12zM3087 2966c-45-16-83-49-103-88-18-35-18-121 1-157 33-64 122-109 188-96 80 17 147 98 147 176-1 117-125 205-233 165z"
        transform="matrix(.1 0 0 -.1 0 512)"
      />
    </svg>
  ),
  color: 'primary',
  actions: [
    {
      icon: renderToStaticMarkup(
        <svg
          version="1.0"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
          fill="currentColor"
        >
          <path
            d="M2770 5102c-98-49-107-188-15-248 14-9 82-29 153-45 214-47 320-82 512-169 275-125 519-298 746-531 328-337 543-741 643-1210 27-127 34-143 73-172 63-46 140-42 191 11 46 48 49 79 21 215-200 984-945 1798-1909 2086-110 33-322 81-357 81-13 0-39-8-58-18zM839 4801c-128-41-235-130-535-448-215-227-273-342-293-571-29-326 81-739 324-1217 102-202 148-281 278-475 490-734 1133-1319 1892-1723C2935 138 3299 21 3630 4c234-13 442 53 598 188 19 16 134 131 256 257 202 207 225 235 264 312 75 150 76 285 1 439-41 83-51 94-413 456-351 352-375 374-447 408-153 72-310 65-459-21-25-15-138-118-252-231l-207-204-99 53c-440 232-1018 814-1232 1240l-39 76 192 194c205 207 255 269 288 363 44 128 35 250-28 379-33 66-67 103-407 443-387 387-418 413-536 448-72 21-200 20-271-3zm224-291c62-29 709-679 736-740 52-115 30-153-244-425-123-121-230-235-240-254-28-56-16-157 30-255 129-274 337-550 654-866 261-261 529-462 800-601 113-59 128-64 185-63 39 0 74 7 96 18 19 10 136 119 260 241s240 230 259 240c50 25 138 17 188-18 71-49 679-669 703-716 29-58 29-124 0-182-22-42-344-380-455-476-160-140-385-157-755-57-270 73-687 275-1030 499-730 478-1398 1251-1736 2010-217 488-270 862-156 1095 20 42 81 110 257 288 145 148 247 243 275 257 56 30 117 31 173 5zM2722 4170c-68-42-92-132-52-197 28-46 52-58 173-88 277-68 500-195 689-394 179-187 300-413 353-656 21-94 35-126 71-154 81-64 211-17 229 83 15 76-60 337-147 510-223 450-627 774-1113 892-121 29-160 30-203 4z"
            transform="matrix(.1 0 0 -.1 0 512)"
          />
        </svg>
      ),
      label: 'Phone',
      path: 'tel:03 8539 4855',
    },
    {
      icon: renderToStaticMarkup(
        <svg
          version="1.0"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
          fill="currentColor"
        >
          <path
            d="M2500 5107c-13-7-153-123-310-259l-285-248h-488c-469 0-489-1-527-20-26-13-47-34-60-60-19-37-20-58-20-437v-398l-385-320c-252-209-390-331-400-351-13-28-15-211-15-1463C10 136 10 119 30 80c13-26 34-47 60-60C129 0 144 0 2560 0s2431 0 2470 20c26 13 47 34 60 60 20 39 20 56 20 1471 0 1252-2 1435-15 1463-10 20-148 142-400 351l-385 320v398c0 379-1 400-20 437-13 26-34 47-60 60-38 19-58 20-527 20l-488 1-292 253c-161 140-303 256-315 260-35 9-80 6-108-7zm157-419 96-83-97-3c-53-1-139-1-192 0l-96 3 93 82c52 45 96 82 98 82 2 1 46-36 98-81zm1353-1338v-949l-450-351-450-350H2012l-451 351-451 351v1898h2900v-950zM808 2805l-3-166-200 155c-110 86-198 159-197 163 2 5 92 82 200 172l197 164 3-161c1-88 1-236 0-327zm3707 322c99-83 186-155 193-162 10-9-27-43-180-161-106-83-199-154-205-158-10-6-13 61-13 319s3 325 13 319c6-5 93-75 192-157zM1016 2095c379-295 689-540 689-545 0-7-1346-1061-1387-1086-4-3-8 486-8 1086s4 1089 8 1086c5-3 319-246 698-541zm3792-1089-3-545-695 541c-382 297-695 544-695 548s313 251 695 548l695 541 3-545c1-299 1-789 0-1088zm-996-152c387-301 705-548 707-550s-879-4-1958-4H598l707 550 707 550h1097l703-546z"
            transform="matrix(.1 0 0 -.1 0 512)"
          />
          <path
            d="M2387 4085c-233-39-450-155-614-328-295-310-383-750-231-1152 93-248 292-467 535-589 131-65 327-116 451-116 61 0 117 32 142 80 25 50 25 90 0 140-26 52-75 75-171 84-208 18-419 129-550 289-64 79-133 219-159 321-24 97-27 261-5 356 70 298 288 525 585 606 101 28 301 26 404-4 277-80 494-297 562-562 38-151-9-411-92-508-44-52-81-72-133-72-73 0-71-15-71 500 0 436-1 456-20 488-60 97-210 96-257-3-9-19-20-35-23-35-4 0-33 10-66 21-84 30-216 30-304 0-113-39-197-100-266-193-89-122-126-240-125-407 1-282 153-520 386-602 120-43 271-25 386 44l56 33 56-52c80-75 145-97 262-91 262 12 433 196 506 542 43 208 16 420-79 610-216 435-691 679-1165 600zm223-784c40-20 94-94 112-154 7-23 12-87 12-142-1-126-25-196-93-265-78-81-161-87-244-19-76 63-118 163-119 281 0 94 17 157 56 212 75 106 175 138 276 87z"
            transform="matrix(.1 0 0 -.1 0 512)"
          />
        </svg>
      ),
      label: 'Email',
      path: 'mailto:enquiries@waterwash.com.au',
    },
    {
      icon: renderToStaticMarkup(
        <svg
          version="1.0"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
          fill="currentColor"
        >
          <path
            d="M1105 4675c-164-36-304-113-426-234-90-91-149-179-190-286-63-161-59-56-57-1902l3-1688 27-40c41-60 89-88 158-93 108-8 101-13 515 398 209 208 395 385 414 395 105 53 23 50 1276 55 1306 6 1203 0 1381 85 178 86 308 213 395 390 90 183 84 95 84 1240v1010l-32 95c-46 136-110 238-212 341-102 102-203 165-341 212l-95 32-1420 2c-1144 1-1432-1-1480-12zm2799-415c180-29 322-168 356-349 6-34 10-373 10-925 0-931-1-951-50-1046-27-53-102-135-154-167-97-62-12-57-1276-63-1139-5-1156-6-1230-27-207-58-289-112-527-347l-183-179v1344c0 815 4 1367 10 1403 29 178 174 326 347 356 70 11 2625 12 2697 0z"
            transform="matrix(.1 0 0 -.1 0 512)"
          />
          <path
            d="M2475 3821c-158-71-167-296-15-380 107-60 247-12 295 101 73 176-109 357-280 279zM2475 3181c-50-22-101-79-115-128-8-26-10-159-8-410l3-371 30-44c97-137 306-118 370 34 13 31 15 96 15 408 0 345-1 373-19 408-54 105-174 150-276 103z"
            transform="matrix(.1 0 0 -.1 0 512)"
          />
        </svg>
      ),
      label: 'Enquiry',
      path: '/contact-us#contact-form',
    },
    {
      icon: renderToStaticMarkup(
        <svg
          version="1.0"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
          fill="currentColor"
        >
          <path
            d="M452 5100c-108-29-187-75-273-160-87-87-140-182-164-295C-7 4540-7 580 15 475 62 251 251 62 475 15 531 3 638 0 1000 0c510 0 502-1 567 73 93 106 49 269-86 315-24 9-162 12-469 12-314 0-446 3-476 12-54 17-109 73-125 129-9 34-11 499-9 2044l3 2000 24 38c13 21 42 50 64 65l41 27 1004 3c717 2 1015-1 1045-9 35-9 77-46 265-233 123-121 233-237 245-256 22-35 22-39 27-652l5-616 30-44a200 200 0 0 1 330 0l30 44 3 608c3 681 2 694-64 830-34 69-59 98-313 351-254 254-282 279-351 313-140 68-103 66-1240 65-976 0-1028-1-1098-19z"
            transform="matrix(.1 0 0 -.1 0 512)"
          />
          <path
            d="M932 3589c-18-5-50-27-72-49-88-88-74-232 29-305l43-30h1654l41 27c62 41 88 90 88 168s-26 127-88 168l-41 27-810 2c-494 1-824-2-844-8zM4395 3108c-27-5-90-29-140-53l-90-44-901-903-900-903-167-323c-91-177-173-345-182-374-41-141 5-303 117-404 22-20 70-50 107-68 60-28 75-31 164-31h98l222 113c122 62 283 145 357 184l135 71 901 901c866 866 902 904 937 976 116 235 76 495-105 685-141 149-344 213-553 173zm216-411c59-31 98-88 106-154 12-103 36-76-889-999l-843-841-220-113c-121-62-253-131-294-153l-74-40 103 199c56 109 127 244 156 299l53 100 848 847c548 547 860 853 883 862 53 23 120 20 171-7zM932 2789c-68-20-132-111-132-188 0-83 63-168 141-190 33-9 237-11 845-9l800 3 41 27c62 41 88 90 88 168s-26 127-88 168l-41 27-810 2c-494 1-824-2-844-8zM932 1989c-68-20-132-111-132-188 0-83 63-168 141-190 32-9 150-11 444-9l400 3 38 24c21 13 50 42 65 64 23 34 27 52 27 108 0 59-4 73-30 110-16 23-50 53-74 66l-44 23-401-1c-221 0-416-5-434-10z"
            transform="matrix(.1 0 0 -.1 0 512)"
          />
        </svg>
      ),
      label: 'Quote',
      path: '/#quote-form',
    },
  ],
};

const DynamicPopup = dynamic(() => import('../popup/Popup'));
const DynamicMessage = dynamic(() => import('./Message'));

interface IProps {
  children: ReactNode;
}

const Layout = ({ children }: IProps) => {
  const dispatch = useDispatch();
  const { route } = useRouter();
  const {
    layout: { hasBanner },
    message: { show },
  } = useSelector(({ shared }: RootState) => shared);

  useEffect(() => {
    dispatch(
      setLayout({
        layoutContent: {
          logo,
          navTop: { contactMethods, links: navTopLinks },
          nav: { links: navLinks },
          socials,
          contactDial,
        },
      })
    );
  }, [dispatch]);

  useEffect(() => {
    return () => {
      dispatch(setLayout({ hasBanner: false }));
    };
  }, [dispatch, route]);

  return (
    <>
      <Head>
        <meta name="viewport" content="initial-scale=1, width=device-width" />
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
        <link rel="manifest" href="/site.webmanifest" />
      </Head>
      <div className="absolute top-0 left-0 right-0">
        <NavbarTop />
        <Navbar />
      </div>
      <main className={clsx(!hasBanner && 'mt-0')}>{children}</main>
      <Footer />
      <ContactDial />
      <DynamicPopup />
      {show && <DynamicMessage />}
    </>
  );
};

export default Layout;
